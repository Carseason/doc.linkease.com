## 自定义网关

这个特性让局域网不同的设备选择不同的路由器上外网。比如部分设备通过主路由上网，部分设备通过旁路由上网。
不需要在设备端做任何设置，只需要在主路由器上面做设置就行了。

"自定义网关"就是针对内网不同主机分配不同的网关地址，典型的使用场景就是家里旁路由连接了异地办公网络，家里内网部分主机需要访问异地办公网络，但其它大部分主机都不需要，而是直接通过主路由上网。
如果主路由器上配置，则导致所有主机都连接到异地办公网络，影响了内网大部分主机的上网质量。
但我们可以在旁路由上设置，并手动设置部分主机智能选择旁路由上网。这样主路由器不受到任何影响。
而联网的内网设备不需要做任何改动跟配置。

首先了解下 “DHCP 选项” 的语法：
* “3,192.168.100.2”表示指派 192.168.100.2 作为网关。（注意3和英文逗号）
* “6,192.168.100.2”表示指派 192.168.100.2 作为 DNS 服务器。（注意6和英文逗号）
* 其他选项不常用就不解释了

典型使用场景（必须iStoreOS提供DHCP服务，以下皆假设主路由IP是192.168.100.1，旁路由IP是192.168.100.2，掩码都是24位）：
* iStoreOS作为旁路由，连接了异地办公室网络，内网部分主机需要访问异地办公室网络（假设这部分主机叫工作机），其它大部分主机则不需要
  1. 打开“网络”-“接口”，在“lan”后面点击编辑，在弹出的对话框选择“DHCP 服务器”-“高级设置”，其中的“DHCP 选项”增加两条“3,192.168.100.1”和“6,192.168.100.1”
  2. 打开“网络”-“DHCP/DNS”-“标签”，在“添加”按钮左边输入“t_work”，点击“添加”按钮，然后也是“DHCP 选项”输入两条“3,192.168.100.2”和“6,192.168.100.2”，保存应用
  3. 打开“网络”-“DHCP/DNS”-“静态地址分配”，点击“添加”（如果之前已经配置了工作机，那编辑相应条目即可），输入主机名称（可以用英文大小写，数字，下划线，必填），选择工作机的MAC；如果不需要固定IP，“IPv4 地址”可以选择未指定；最关键的是在“标签”选项中选择“t_work”（如果没出现，保存下刷新页面再回来选）。然后保存应用即可。对于每台工作机都要添加。内网主机重新插网线或连wifi，应该就会获取到指定的网关和DNS了。

